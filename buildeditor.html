<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fiche de Personnage</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: space-between; }
        .character-sheet { width: 40%; padding: 20px; border-right: 2px solid #ccc; text-align: center; }
        .stats-panel { width: 50%; padding: 20px; }
        .equipment-slot { width: 100px; height: 100px; border: 2px solid #000; margin: 10px auto; cursor: pointer; display: flex; align-items: center; justify-content: center; background-size: cover; }
        .panel { display: none; position: absolute; top: 50px; right: 20px; background: white; border: 1px solid #000; padding: 10px; }
    </style>
</head>
<body>
    <div class="character-sheet">
        <h2>Personnage</h2>
        <div class="equipment-slot" id="helmet-slot" onclick="openPanel('helmet')" style="background-image: url('img/Slot/icon_bg_helmet.png');"></div>
        <div class="equipment-slot" id="shoulders-slot" onclick="openPanel('shoulders')" style="background-image: url('img/Slot/icon_bg_shoulders.png');"></div>
        <div class="equipment-slot" id="chest-slot" onclick="openPanel('chest')" style="background-image: url('img/Slot/icon_bg_chest.png');"></div>
        <div class="equipment-slot" id="gloves-slot" onclick="openPanel('gloves')" style="background-image: url('img/Slot/icon_bg_gloves.png');"></div>
        <div class="equipment-slot" id="belt-slot" onclick="openPanel('belt')" style="background-image: url('img/Slot/icon_bg_belt.png');"></div>
        <div class="equipment-slot" id="pants-slot" onclick="openPanel('pants')" style="background-image: url('img/Slot/icon_bg_pants.png');"></div>
        <div class="equipment-slot" id="boots-slot" onclick="openPanel('boots')" style="background-image: url('img/Slot/icon_bg_boots.png');"></div>
        <div class="equipment-slot" id="weapon-slot" onclick="openPanel('weapon')" style="background-image: url('img/Slot/icon_bg_weapon.png');"></div>
        <div class="equipment-slot" id="offhand-slot" onclick="openPanel('offhand')" style="background-image: url('img/Slot/icon_bg_shield.png');"></div>
        <div class="equipment-slot" id="ringleft-slot" onclick="openPanel('ringleft')" style="background-image: url('img/Slot/icon_bg_shield.png');"></div>
        <div class="equipment-slot" id="ringright-slot" onclick="openPanel('ringright')" style="background-image: url('img/Slot/icon_bg_shield.png');"></div>
        <div class="equipment-slot" id="neck-slot" onclick="openPanel('neck')" style="background-image: url('img/Slot/icon_bg_shield.png');"></div>
    </div>
    <div class="stats-panel">
        <h2>Stats</h2>
        <h3>Level: <span id="level">1</span></h3>
        <h3>Class: <span id="class">Guerrier</span></h3>
        <h3>Offensives</h3>
        <p>ATK: <span id="atk">50</span></p>
        <p>CRIT: <span id="crit">10%</span></p>
        <h3>Défensives</h3>
        <p>DEF: <span id="def">30</span></p>
        <p>Résistance: <span id="res">5%</span></p>
        <h3>Utilitaires</h3>
        <p>VIT: <span id="vit">20</span></p>

        <!-- Interface pour attribuer des points de stats -->
        <h3>Points disponibles: <span id="available-points">5</span></h3>
        <button onclick="openStatsPanel()">Attribuer des points</button>

        <!-- Choisir le niveau et la classe -->
        <h3>Choisir le niveau et la classe</h3>
        <button onclick="openClassLevelPanel()">Changer le niveau / la classe</button>
    </div>
    <div class="panel" id="equipment-panel">
        <h3>Choisir un équipement</h3>
        <select id="equipment-select"></select>
        <select id="rarity-select">
            <option value="gris">Gris</option>
            <option value="vert">Vert</option>
            <option value="bleu">Bleu</option>
            <option value="violet">Violet</option>
            <option value="légendaire">Légendaire</option>
        </select>
        <button onclick="applySelection()">Valider</button>
    </div>
    <div class="panel" id="stats-panel">
        <h3>Attribuer des points de stats</h3>
        <p>ATK: <button onclick="addStat('atk')">+</button><span id="atk-points">0</span></p>
        <p>DEF: <button onclick="addStat('def')">+</button><span id="def-points">0</span></p>
        <p>VIT: <button onclick="addStat('vit')">+</button><span id="vit-points">0</span></p>
        <button onclick="applyStats()">Valider les points</button>
    </div>
    <div class="panel" id="class-level-panel">
        <h3>Changer le niveau et la classe</h3>
        <label for="level-input">Niveau :</label>
        <input type="number" id="level-input" value="1" min="1" max="100"><br>
        <label for="class-select">Classe :</label>
        <select id="class-select">
            <option value="Guerrier">Guerrier</option>
            <option value="Magicien">Magicien</option>
            <option value="Voleur">Voleur</option>
        </select><br>
        <button onclick="applyClassLevel()">Valider</button>
    </div>

    <script>
        const equipment = {
            "helmet": [
                { name: "Casque en cuir", atk: 0, def: 5 },
                { name: "Casque en fer", atk: 0, def: 10 }
            ],
            "shoulders": [
                { name: "Épaulières légères", atk: 0, def: 3 },
                { name: "Épaulières lourdes", atk: 0, def: 8 }
            ],
            "chest": [
                { name: "Plastron de cuir", atk: 0, def: 10 },
                { name: "Plastron d'acier", atk: 0, def: 15 }
            ],
            "weapon": [
                { name: "Épée de base", atk: 15, def: 0 },
                { name: "Hache de guerre", atk: 20, def: 0 }
            ]
        };

        let currentSlot = "";
        let playerLevel = 1;
        let availablePoints = 5;
        let statsPoints = { atk: 0, def: 0, vit: 0 };
        let playerClass = "Guerrier";
        
        // Mise à jour des statistiques de base
        const baseStats = {
            "Guerrier": { atk: 10, def: 15, vit: 25 },
            "Magicien": { atk: 15, def: 5, vit: 20 },
            "Voleur": { atk: 12, def: 10, vit: 30 }
        };

        function updateStats() {
            const levelMultiplier = 1 + (playerLevel - 1) * 0.1;
            const base = baseStats[playerClass];
            document.getElementById("atk").textContent = (base.atk + statsPoints.atk * 2) * levelMultiplier;
            document.getElementById("def").textContent = (base.def + statsPoints.def * 2) * levelMultiplier;
            document.getElementById("vit").textContent = (base.vit + statsPoints.vit * 2) * levelMultiplier;
            document.getElementById("level").textContent = playerLevel;
            document.getElementById("class").textContent = playerClass;
        }

        // Ouvrir la fenêtre pour attribuer des points de stats
        function openStatsPanel() {
            closePanels();
            const panel = document.getElementById("stats-panel");
            panel.style.display = "block";
            updateStats();
            document.getElementById("available-points").textContent = availablePoints;
        }

        // Ouvrir la fenêtre pour changer la classe et le niveau
        function openClassLevelPanel() {
            closePanels();
            const panel = document.getElementById("class-level-panel");
            panel.style.display = "block";
        }

        // Appliquer le changement de niveau et de classe
        function applyClassLevel() {
            playerLevel = parseInt(document.getElementById("level-input").value);
            playerClass = document.getElementById("class-select").value;
            availablePoints = 5 + (playerLevel - 1) * 2;
            statsPoints = { atk: 0, def: 0, vit: 0 };
            updateStats();
            document.getElementById("class-level-panel").style.display = "none";
        }

        // Ouvrir un panneau d'équipement
        function openPanel(slot) {
            closePanels();
            if (currentSlot === slot) {
                return; // Si le même panneau est cliqué, on le ferme
            }
            currentSlot = slot;
            const panel = document.getElementById("equipment-panel");
            panel.style.display = "block";
            const select = document.getElementById("equipment-select");
            select.innerHTML = "";
            equipment[slot].forEach((item, index) => {
                let option = document.createElement("option");
                option.value = index;
                option.textContent = item.name;
                select.appendChild(option);
            });
        }

        // Fermer tous les panneaux ouverts
        function closePanels() {
            document.getElementById("equipment-panel").style.display = "none";
            document.getElementById("stats-panel").style.display = "none";
            document.getElementById("class-level-panel").style.display = "none";
        }

        // Ajouter un point à la statistique correspondante
        function addStat(stat) {
            if (availablePoints > 0) {
                statsPoints[stat]++;
                availablePoints--;
                document.getElementById(`${stat}-points`).textContent = statsPoints[stat];
                document.getElementById("available-points").textContent = availablePoints;
                updateStats();
            }
        }

        // Appliquer les points de stats
        function applyStats() {
            document.getElementById("stats-panel").style.display = "none";
            updateStats();
        }

        // Appliquer la sélection de l'équipement
        function applySelection() {
            const select = document.getElementById("equipment-select");
            const rarity = document.getElementById("rarity-select").value;
            const selectedItem = equipment[currentSlot][select.value];
            statsPoints.def += selectedItem.def || 0;
            statsPoints.atk += selectedItem.atk || 0;
            updateStats();
            document.getElementById("equipment-panel").style.display = "none";
        }

        updateStats();
    </script>
</body>
</html>
